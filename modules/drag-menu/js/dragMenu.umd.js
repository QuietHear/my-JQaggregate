/*
 * @LastEditors: aFei
 * @LastEditTime: 2022-12-06 09:43:08
*/
(function(f){typeof define=="function"&&define.amd?define(f):f()})(function(){"use strict";var f={$parent:$(".btnGroup"),$first:$(".btnGroup .item:nth-child(1)"),$second:$(".btnGroup .item:nth-child(2)"),ITEMWIDTH:null,ITEMHEIGHT:null,ITEMNUM:null,ENDTIME:null,STEP:6,MOVEBETWEEN:10,WINDOWWIDTH:null,WINDOWHEIGHT:null,FATHERX:null,FATHERY:null,STATICWIDTH:null,STATICHEIGHT:null,NOWX:null,NOWY:null,beginX:null,beginY:null,clickX:null,clickY:null,moveX:null,moveXMin:null,moveXMax:null,moveY:null,moveYMin:null,moveYMax:null,firstTime:!0,needCheck:!1,isPC:!0,arr:[],endX:null,endY:null,start:function(){this.ITEMWIDTH=parseInt(this.$first.css("width")),this.ITEMHEIGHT=parseInt(this.$first.css("height")),this.ITEMNUM=this.$parent.find(".item").length,this.notDragMax(),/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&(this.isPC=!1),this.isPC?this.$first.on({mousedown:this.moveBegin.bind(this)}):this.$first.on({touchstart:this.moveBegin.bind(this)}),$(window).on("resize",this.notDragMax.bind(this))},checkCollapse:function(){this.needCheck&&(parseInt(this.$first.css("top"))>parseInt(this.$second.css("top"))?this.toTop():parseInt(this.$first.css("top"))<parseInt(this.$second.css("top"))?this.toBottom():parseInt(this.$first.css("left"))>parseInt(this.$second.css("left"))?this.toLeft():parseInt(this.$first.css("left"))<parseInt(this.$second.css("left"))&&this.toRight())},showMenu:function(){let t,i,s,e;t=this.$first.offset().left,i=this.$first.offset().top,t>this.STATICWIDTH/2?i<this.STATICHEIGHT/2?(s=this.WINDOWWIDTH-t-this.ITEMWIDTH,e=i,s>e?this.toBottom():s<e?this.toLeft():this.toBottom()):(s=this.WINDOWWIDTH-t-this.ITEMWIDTH,e=this.WINDOWHEIGHT-i-this.ITEMHEIGHT,s>e?this.toTop():s<e?this.toLeft():this.toTop()):i<this.STATICHEIGHT/2?(s=t,e=i,s>e?this.toBottom():s<e?this.toRight():this.toBottom()):(s=t,e=this.WINDOWHEIGHT-i-this.ITEMHEIGHT,s>e?this.toTop():s<e?this.toRight():this.toTop())},toTop:function(){let t=this;this.$first.css("top")!==this.$second.css("top")?(this.needCheck=!1,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({top:t.NOWY+t.MOVEBETWEEN},50),$(this).animate({top:t.NOWY-t.MOVEBETWEEN},100),$(this).animate({top:t.NOWY},50))})):(this.needCheck=!0,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({top:t.NOWY-(i*(t.ITEMHEIGHT+t.MOVEBETWEEN)+t.MOVEBETWEEN)},50),$(this).animate({top:t.NOWY-i*(t.ITEMHEIGHT+t.MOVEBETWEEN)},100))}))},toBottom:function(){let t=this;this.$first.css("top")!==this.$second.css("top")?(this.needCheck=!1,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({top:t.NOWY-t.MOVEBETWEEN},50),$(this).animate({top:t.NOWY+t.MOVEBETWEEN},100),$(this).animate({top:t.NOWY},50))})):(this.needCheck=!0,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({top:t.NOWY+(i*(t.ITEMHEIGHT+t.MOVEBETWEEN)+t.MOVEBETWEEN)},50),$(this).animate({top:t.NOWY+i*(t.ITEMHEIGHT+t.MOVEBETWEEN)},100))}))},toLeft:function(){let t=this;this.$first.css("left")!==this.$second.css("left")?(this.needCheck=!1,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({left:t.NOWX+t.MOVEBETWEEN},50),$(this).animate({left:t.NOWX-t.MOVEBETWEEN},100),$(this).animate({left:t.NOWX},50))})):(this.needCheck=!0,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({left:t.NOWX-(i*(t.ITEMWIDTH+t.MOVEBETWEEN)+t.MOVEBETWEEN)},50),$(this).animate({left:t.NOWX-i*(t.ITEMWIDTH+t.MOVEBETWEEN)},100))}))},toRight:function(){let t=this;this.$first.css("left")!==this.$second.css("left")?(this.needCheck=!1,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({left:t.NOWX-t.MOVEBETWEEN},50),$(this).animate({left:t.NOWX+t.MOVEBETWEEN},100),$(this).animate({left:t.NOWX},50))})):(this.needCheck=!0,this.$parent.find(".item").each(function(i){i>0&&($(this).animate({left:t.NOWX+(i*(t.ITEMWIDTH+t.MOVEBETWEEN)+t.MOVEBETWEEN)},50),$(this).animate({left:t.NOWX+i*(t.ITEMWIDTH+t.MOVEBETWEEN)},100))}))},moveBegin:function(t){this.isPC?(this.clickX=t.offsetX,this.clickY=t.offsetY):(this.clickX=t.originalEvent.changedTouches[0].clientX-this.$first.offset().left,this.clickY=t.originalEvent.changedTouches[0].clientY-this.$first.offset().top),this.beginX=this.$first.offset().left,this.beginY=this.$first.offset().top,this.moveXMin=this.clickX,this.moveXMax=this.STATICWIDTH+this.clickX,this.moveYMin=this.clickY,this.moveYMax=this.STATICHEIGHT+this.clickY,this.arr=[],this.NOWX=this.beginX-this.FATHERX,this.NOWY=this.beginY-this.FATHERY,this.isPC?$("html").on({mousemove:this.moveIng.bind(this),mouseup:this.moveEnd.bind(this)}):$("html").on({touchmove:this.moveIng.bind(this),touchend:this.moveEnd.bind(this)})},moveIng:function(t){this.checkCollapse();let i=this;this.isPC?(this.moveX=t.clientX,this.moveY=t.clientY):(this.moveX=t.originalEvent.changedTouches[0].clientX,this.moveY=t.originalEvent.changedTouches[0].clientY),this.moveX<this.moveXMin?this.NOWX=0-this.FATHERX:this.moveX>this.moveXMax?this.NOWX=this.STATICWIDTH-this.FATHERX:this.NOWX=this.moveX-this.FATHERX-this.clickX,this.moveY<this.moveYMin?this.NOWY=0-this.FATHERY:this.moveY>this.moveYMax?this.NOWY=this.STATICHEIGHT-this.FATHERY:this.NOWY=this.moveY-this.FATHERY-this.clickY,this.arr.push([this.NOWX,this.NOWY]),this.$parent.find(".item").each(function(s){i.arr.length>s*i.STEP&&$(this).css({left:i.arr[i.arr.length-1-i.STEP*s][0],top:i.arr[i.arr.length-1-i.STEP*s][1]})}),this.arr.length>i.STEP*(this.ITEMNUM-1)+1&&this.arr.shift(),(this.ENDTIME!==null||this.ENDTIME!==void 0)&&clearTimeout(this.ENDTIME),this.ENDTIME=setTimeout(this.dragStop.bind(this),500)},moveEnd:function(){this.endX=this.$first.offset().left,this.endY=this.$first.offset().top,this.isPC?$("html").unbind("mousemove mouseup"):$("html").unbind("touchmove touchend"),this.beginX===this.endX&&this.beginY===this.endY&&this.showMenu()},dragStop:function(){this.arr.length===1&&this.arr.unshift([this.arr[0][0],this.arr[0][1]-1]);let t,i,s=this.arr[this.arr.length-2][0],e=this.arr[this.arr.length-2][1],h=this.arr[this.arr.length-1][0],n=this.arr[this.arr.length-1][1],l=Math.abs(h-s),E=Math.abs(n-e);l===0?(t=0,i=this.MOVEBETWEEN):(t=Math.sqrt(Math.pow(this.MOVEBETWEEN,2)*Math.pow(l,2)/(Math.pow(l,2)+Math.pow(E,2))),i=t*E/l),this.$parent.find(".item").each(function(T){let o=this;T>0&&setTimeout(function(){$(o).animate({left:s,top:e},50),$(o).animate({left:h>s?h+t:h-t,top:n>e?n+i:n-i},50),$(o).animate({left:h>s?h-t:h+t,top:n>e?n-i:n+i},100),$(o).animate({left:h,top:n},50)}.bind(o),T*100)}),this.arr=[]},notDragMax:function(){let t=this;if(this.checkCollapse(),this.WINDOWWIDTH=window.innerWidth,this.WINDOWHEIGHT=window.innerHeight,this.STATICWIDTH=this.WINDOWWIDTH-this.ITEMWIDTH,this.STATICHEIGHT=this.WINDOWHEIGHT-this.ITEMHEIGHT,this.FATHERX=this.$parent.offset().left,this.FATHERY=this.$parent.offset().top,this.firstTime)this.firstTime=!1,this.NOWX=this.STATICWIDTH-this.FATHERX-10,this.NOWY=this.STATICHEIGHT-this.FATHERY-10;else{let i=this.$first.offset().left,s=this.$first.offset().top;this.STATICWIDTH>0?i<this.STATICWIDTH?this.NOWX=i-this.FATHERX:this.NOWX=this.STATICWIDTH-this.FATHERX:this.NOWX=0,this.STATICHEIGHT>0?s<this.STATICHEIGHT?this.NOWY=s-this.FATHERY:this.NOWY=this.STATICHEIGHT-this.FATHERY:this.NOWY=0}this.$parent.find(".item").each(function(){$(this).css({left:t.NOWX,top:t.NOWY})})}};window.dragMenu=f});