/*
 * @LastEditors: aFei
 * @LastEditTime: 2022-12-06 09:40:52
*/
(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";let c=function(i,t){this.defaults={shutterW:1200,shutterH:500,isAutoPlay:!1,playInterval:3e3,curDisplay:0,fullPage:!1},this.opts=$.extend({},this.defaults,t),this.begin=!0,this.inital(i)};c.prototype={play:function(){let i=this;this.opts.isAutoPlay&&(clearInterval(this.playTime),this.playTime=setInterval(function(){i.$nextBtn.click()},this.opts.playInterval))},moveSwitch:function(i,t,e){switch(i){case 0:this.gridWhole(e,0);break;case 1:this.gridWhole(e,1);break;case 2:this.gridWhole(e,2);break;case 3:this.gridWhole(e,3);break;case 4:this.gridTop(e,0);break;case 5:this.gridTop(e,1);break;case 6:this.gridTop(e,2);break;case 7:this.gridLeft(e,0);break;case 8:this.gridLeft(e,1);break;case 9:this.gridLeft(e,2);break;case 10:this.gridOpacity(e);break;case 11:this.gridAccordion(e);break;case 12:this.gridLittle(e);break;case 13:this.gridSwitch(e);break;default:this.gridTop(e,0);break}},toggleMove:function(i,t){if(i===void 0){if(this.curDisplay===t)return;this.curDisplay===0&&t===this.shutterItem_len-1||t<this.curDisplay?i="prev":i="next"}t===void 0&&(i==="prev"?(t=this.curDisplay-1,this.curDisplay===0&&(t=this.shutterItem_len-1)):(t=this.curDisplay+1,this.curDisplay===this.shutterItem_len-1&&(t=0))),this.$shutterDesc.animate({bottom:-36});let e=function(r,h){return Math.floor(Math.random()*(h+1)-r)};this.moveSwitch(e(0,13),i,t),$(".bigCarousel .indicator .active").removeClass("active"),$(".bigCarousel .indicator li[data-place="+t+"]").addClass("active"),this.shutterTitle=this.$shutterItem.eq(t).attr("data-shutter-title")},initalShutter:function(){let i=this.$shutterItem.eq(this.curDisplay),t=this.$shutterItem.not(i);i.css("zIndex",20),t.each(function(e){$(this).css("zIndex",++e)}),this.$shutter.css({width:this.opts.shutterW,height:this.opts.shutterH}),this.opts.fullPage&&this.$shutter.css({width:$(window).width(),height:$(window).height(),margin:0,borderRadius:0,border:"none"})},inital:function(i){let t=this;this.$shutter=i,this.$shutterItem=this.$shutter.find(".list a"),this.$prevBtn=this.$shutter.find(".controls.prv-btn"),this.$nextBtn=this.$shutter.find(".controls.next-btn"),this.$shutterNav=this.$shutter.find(".indicator li"),this.$shutterDesc=this.$shutter.find(".tit"),this.shutterItem_len=this.$shutterItem.length,this.curDisplay=this.opts.curDisplay>this.shutterItem_len-1?this.opts.curDisplay=this.shutterItem_len-1:this.opts.curDisplay,this.b_stop=!0,this.shutterTitle="",this.playTime=null,this.initalShutter(),this.shutterW=this.$shutter.width(),this.shutterH=this.$shutter.height(),this.begin&&(this.begin=!1,this.$shutterDesc.text(this.$shutterItem.eq(this.curDisplay).attr("data-shutter-title"))),this.$prevBtn.bind("click",function(){t.b_stop&&(t.b_stop=!1,t.toggleMove("prev"))}),this.$nextBtn.bind("click",function(){t.b_stop&&(t.b_stop=!1,t.toggleMove("next"),t.$shutterDesc.animate({bottom:-36}))}),this.$shutterNav.bind("click",function(){let e=parseInt($(this).attr("data-place"));t.curDisplay>e?t.toggleMove("prev",e):t.curDisplay<e&&t.toggleMove("next",e)}),this.opts.fullPage&&$(window).resize(function(){setTimeout(function(){t.$shutter.css({width:$(this).width(),height:$(this).height()}),t.shutterW=t.$shutter.width(),t.shutterH=t.$shutter.height()},30)}),this.play(),this.$shutter.hover(function(){clearInterval(t.playTime)},function(){t.play()})},recovery:function(i,t,e,r,h){let s=this;setTimeout(function(){i.css("zIndex",20),t.css("zIndex",s.curDisplay).html(r),s.curDisplay=e,s.$shutterDesc.animate({bottom:0}).text(s.shutterTitle),s.b_stop=!0},h)},gridWhole:function(i,t){let e=this.$shutterItem.eq(this.curDisplay),r=this.$shutterItem.eq(i),h=e.html(),s=$('<div class="created"></div>'),l=0;r.css("zIndex",19),e.find("img").fadeOut(),s.html(h).css({position:"absolute",zIndex:20,left:0,top:0,overflow:"hidden",width:this.shutterW,height:this.shutterH}),e.append(s),t===0?(l=this.shutterW,s.velocity({left:l},{duration:1e3})):t===1?(l=-this.shutterW,s.velocity({left:l},{duration:1e3})):t===2?(l=this.shutterH,s.velocity({top:l},{duration:1e3})):t===3&&(l=-this.shutterH,s.velocity({top:l},{duration:1e3})),s.find("img").css({display:"block",width:this.shutterW,height:this.shutterH}),this.recovery(r,e,i,h,1200)},gridTop:function(i,t){let e=this,r=this.$shutterItem.eq(this.curDisplay),h=this.$shutterItem.eq(i),s=r.html(),l=0;h.css("zIndex",19),r.find("img").fadeOut();for(let u=0;u<12;u++){let a=$('<div class="created"></div>');a.html(s).css({position:"absolute",zIndex:20,left:this.shutterW/12*u,top:0,overflow:"hidden",width:this.shutterW/12,height:this.shutterH}),r.append(a),a.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:this.shutterW/-12*u})}if(t===0){let u=0;r.find(".created").each(function(a){a%2===0?u=e.shutterH:u=-e.shutterH,$(this).velocity({top:u},{duration:1e3})})}else t===1?r.find(".created").each(function(u){l=80*u,$(this).velocity({top:$(this).height()},{duration:120+l})}):t===2&&r.find(".created").each(function(u){l=80*u,$(this).velocity({top:-$(this).height()},{duration:120+l})});this.recovery(h,r,i,s,1e3)},gridLeft:function(i,t){let e=this,r=this.$shutterItem.eq(this.curDisplay),h=this.$shutterItem.eq(i),s=r.html(),l=0;h.css("zIndex",19),r.find("img").fadeOut();for(let u=0;u<12;u++){let a=$('<div class="created"></div>');a.html(s).css({position:"absolute",zIndex:20,left:0,top:this.shutterH/12*u,overflow:"hidden",width:this.shutterW,height:this.shutterH/12}),r.append(a),a.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginTop:this.shutterH/-12*u})}if(t===0){let u=0;r.find(".created").each(function(a){a%2===0?u=e.shutterW:u=-e.shutterW,$(this).velocity({left:u},{duration:1e3})})}else t===1?r.find(".created").each(function(u){l=80*u,$(this).velocity({left:$(this).width()},{duration:120+l})}):t===2&&r.find(".created").each(function(u){l=80*u,$(this).velocity({left:-$(this).width()},{duration:120+l})});this.recovery(h,r,i,s,1e3)},gridOpacity:function(i){let t=this.$shutterItem.eq(this.curDisplay),e=this.$shutterItem.eq(i),r=t.html(),h=$('<div class="created"></div>');e.css("zIndex",19),t.find("img").fadeOut(),h.html(r).css({position:"absolute",zIndex:20,left:0,top:0,overflow:"hidden",width:this.shutterW,height:this.shutterH,opacity:1}),h.find("img").css({display:"block",width:this.shutterW,height:this.shutterH}),t.append(h),h.velocity({opacity:0},{duration:1e3}),this.recovery(e,t,i,r,1e3)},gridAccordion:function(i){let t=this.$shutterItem.eq(this.curDisplay),e=this.$shutterItem.eq(i),r=t.html(),h=0;e.css("zIndex",19),t.find("img").fadeOut();for(let s=0;s<12;s++){let l=$('<div class="created"></div>');l.html(r).css({position:"absolute",zIndex:20,left:this.shutterW/12*s,top:0,overflow:"hidden",width:this.shutterW/12,height:this.shutterH,opacity:1}),t.append(l),l.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:this.shutterW/-12*s})}t.find(".created").each(function(s){h=s*80,$(this).velocity({opacity:0},{duration:320+h})}),this.recovery(e,t,i,r,1200)},gridLittle:function(i){let t=this.$shutterItem.eq(this.curDisplay),e=this.$shutterItem.eq(i),r=t.html(),h=null;e.css("zIndex",19),t.find("img").fadeOut();for(let s=0;s<24;s++){let l=$('<div class="created"></div>');l.html(r).css({width:this.shutterW/6,height:this.shutterH/4,left:this.shutterW/6*(s%6),top:this.shutterH/4*Math.floor(s/6)}),t.append(l),l.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:-(this.shutterW/6)*(s%6),marginTop:-(this.shutterH/4)*Math.floor(s/6)})}h=n(t.find(".created"),4,6),o(h,0,0,function(){let s=parseInt(this.style.left),l=parseInt(this.style.top);$(this).velocity({left:s+100,top:l+100,opacity:0})},100,1,1),this.recovery(e,t,i,r,1200)},gridSwitch:function(i){let t=this.$shutterItem.eq(this.curDisplay),e=this.$shutterItem.eq(i),r=t.html();e.css("zIndex",19),t.find("img").fadeOut();for(let h=0;h<20;h++){let s=$('<div class="created"></div>');s.html(r).css({width:this.shutterW/5,height:this.shutterH/4,left:this.shutterW/5*(h%5),top:this.shutterH/4*Math.floor(h/5)}),t.append(s),s.find("img").css({display:"block",width:this.shutterW,height:this.shutterH,marginLeft:-(this.shutterW/5)*(h%5),marginTop:-(this.shutterH/4)*Math.floor(h/5)})}t.find(".created").each(function(h){h%2===0&&$(this).find("img").velocity({marginLeft:$(this).width()},{duration:500})}),setTimeout(function(){t.find(".created").each(function(h){h%1===0&&$(this).find("img").velocity({marginLeft:$(this).width()},{duration:500})})},600),this.recovery(e,t,i,r,1200)},constructor:c},$.fn.shutter=function(i){this.each(function(){new c($(this),i)})};function o(i,t,e,r,h,s,l){!i[e]||!i[e][t]||r&&(r.call(i[e][t]),clearTimeout(i[e][t].timer),i[e][t].timer=setTimeout(function(){o(i,t,e+l,r,h,s,l),o(i,t+s,e,r,h,s,l)},h))}function n(i,t,e){let r=[];for(let h=0;h<t;h++){let s=[];for(let l=0;l<e;l++)i[h*e+l].xIndex=l,i[h*e+l].yIndex=h,s.push(i[h*e+l]);r.push(s)}return r}});